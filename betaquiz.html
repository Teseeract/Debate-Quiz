<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>What's Your Debating Element?</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .question {
      margin-bottom: 25px;
      padding: 15px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question h3 {
      margin-bottom: 20px;
    }
    .options label {
      display: block;
      padding: 10px;
      margin-bottom: 10px;
      background: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 6px;
      cursor: pointer;
    }
    .options input[type="radio"] {
      margin-right: 10px;
    }
    .submit-btn {
      display: block;
      margin: 30px auto 10px;
      padding: 12px 24px;
      background: #007BFF;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }
    .result {
      text-align: center;
      margin-top: 30px;
      padding: 20px;
      background: #fffbe6;
      border-radius: 10px;
      font-size: 18px;
    }
    .bar {
      height: 20px;
      margin: 5px 0;
      background: #ccc;
      border-radius: 5px;
      overflow: hidden;
    }
    .bar-inner {
      height: 100%;
      text-align: right;
      padding-right: 5px;
      color: white;
      font-size: 14px;
      line-height: 20px;
    }
  @keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>

<h1>ğŸ”¥ What's Your Debating Element? ğŸŒŠ</h1>
<p style="text-align: center; font-size: 14px; color: #666; margin-top: -10px;">Powered by Tuesday Academy V1.6X?</p>

<form id="quizForm"></form>

<div id="result" class="result" style="display:none; border-top: 4px solid #007BFF; padding-top: 20px; animation: fadeIn 1s ease-in-out;"></div>

<script>
  const questions = [
    {
      question: "Why did you originally join debating?",
      options: [
        { text: "To prove myself and win arguments." , value: "a" },
        { text: "To better understand others' perspectives." , value: "b" },
        { text: "To sharpen my logic and analytical skills." , value: "c" },
        { text: "To explore ideas and express my creativity." , value: "d" }
      ]
    },
    {
      question: "How do you usually respond when your opponent misunderstands your argument?",
      options: [
        { text: "Use it as a pivot to reframe your entire argument.", value: "d" },
        { text: "Clarify calmly and restate in simpler terms.", value: "b" },
        { text: "Firmly correct them to regain control of the room.", value: "a" },
        { text: "Let it slide unless it affects the core of your case.", value: "c" }
      ]
    },
    {
      question: "Whatâ€™s your biggest strength during prep time?",
      options: [
        { text: "Brainstorming unusual but compelling frames.", value: "d" },
        { text: "Creating a clear case structure with layered logic.", value: "c" },
        { text: "Anticipating emotional angles or audience reaction.", value: "b" },
        { text: "Generating strong examples and punchy phrasing.", value: "a" }
      ]
    },
    {
      question: "During crossfire (POIs or rebuttal clashes), whatâ€™s your instinct?",
      options: [
        { text: "Use crossfire to expose contradictions with humor or irony.", value: "d" },
        { text: "Avoid it unless necessary; focus on your speeches.", value: "c" },
        { text: "Interject often and aggressively to rattle your opponents.", value: "a" },
        { text: "Choose moments carefully and ask probing, polite questions.", value: "b" }
      ]
    },
    {
      question: "How do you make your case persuasive?",
      options: [
        { text: "Connect the motion to real-world impact and empathy.", value: "b" },
        { text: "Redefine the issue to make your side seem inevitable.", value: "d" },
        { text: "Build step-by-step logic thatâ€™s hard to refute.", value: "c" },
        { text: "Deliver your points with passion and urgency.", value: "a" }
      ]
    },
    {
      question: "Youâ€™re in a tight round against strong opponents. Whatâ€™s your strategy?",
      options: [
        { text: "Stick to your prepared structure and out-analyze them.", value: "c" },
        { text: "Stay adaptable and listen closely to tweak your case.", value: "b" },
        { text: "Flip the framing in your reply speech to undermine their assumptions.", value: "d" },
        { text: "Go bold: try to outshine with energy and assertiveness.", value: "a" }
      ]
    },
    {
      question: "Which type of motion do you usually enjoy the most?",
      options: [
        { text: "Meta or abstract motions about debate, identity, or philosophy.", value: "d" },
        { text: "Policy-heavy or tech-regulation motions.", value: "c" },
        { text: "Moral dilemmas or activism-based debates.", value: "a" },
        { text: "Social issues and nuanced ethical decisions.", value: "b" }
      ]
    },
    {
      question: "What motivates you most to improve in debate?",
      options: [
        { text: "The challenge of building flawless logical structures.", value: "c" },
        { text: "The thrill of outperforming tough opponents.", value: "a" },
        { text: "The desire to connect better with audiences and judges.", value: "b" },
        { text: "The curiosity to explore new ideas and experiment with framing.", value: "d" }
      ]
    },
    {
      question: "How do you typically respond when your team is under time pressure?",
      options: [
        { text: "Stick to the structure and avoid improvisation.", value: "c" },
        { text: "Push your team to be bolder and more decisive.", value: "a" },
        { text: "Keep morale high and reassure your team.", value: "b" },
        { text: "Suggest cutting the argument in an unexpected way.", value: "d" }
      ]
    },
    {
      question: "Whatâ€™s your mindset right before a debate round begins?",
      options: [
        { text: "I hype myself upâ€”this is war and Iâ€™m ready to win.", value: "a" },
        { text: "I remind myself to stay composed and read the judges well.", value: "b" },
        { text: "I run through my case structure to check for gaps or weak links.", value: "c" },
        { text: "I think about clever angles or unexpected ways to flip the motion.", value: "d" }
      ]
    },
    {
      question: "Which kind of clash do you prefer handling?",
      options: [
        { text: "Technical disputes over principles or causation.", value: "c" },
        { text: "Heated ideological showdowns.", value: "a" },
        { text: "Subtle shifts in framing and assumptions.", value: "d" },
        { text: "Emotional or ethical dilemmas.", value: "b" }
      ]
    }
  ];

  const form = document.getElementById('quizForm');
  questions.forEach((q, i) => {
    const div = document.createElement('div');
    div.className = 'question';
    div.innerHTML = `<h3>${q.question}</h3>` + q.options.map(opt => `
      <div class='options'><label><input type="radio" name="q${i + 1}" value="${opt.value}"> ${opt.text}</label></div>`).join('');
    form.appendChild(div);
  });

  const button = document.createElement('button');
  button.type = 'button';
  button.className = 'submit-btn';
  button.innerText = 'See Your Elemental Mix';
  button.onclick = function() {
    const quizData = {};
    const formData = new FormData(form);
    formData.forEach((value, key) => { quizData[key] = value; });
    console.log('Quiz Data:', quizData);
    fetch('https://script.google.com/macros/s/AKfycby8_v6oPHs2uMkugI-nS8ZsscqeV1hOvhjvIXcl2q2ZyCyBUn3tyE90uxAiw95TVIyZsw/exec', {
      method: 'POST',
      mode: 'no-cors',
      body: JSON.stringify(quizData),
      headers: { 'Content-Type': 'application/json' }
    });
    calculateResult();
  };
  form.appendChild(button);

function calculateResult() {
  const totals = { fire: 0, water: 0, earth: 0, air: 0 };
  const formData = new FormData(document.getElementById('quizForm'));

  for (let [key, value] of formData.entries()) {
    const weights = answerWeights[value];
    for (let elem in weights) {
      totals[elem] += weights[elem];
    }
  }

  const totalScore = Object.values(totals).reduce((a, b) => a + b, 0);
  const percentages = {};
  for (let elem in totals) {
    percentages[elem] = Math.round((totals[elem] / totalScore) * 100);
  }

  const sorted = Object.entries(percentages).sort((a, b) => b[1] - a[1]);
  const [topElem, topPercent] = sorted[0];
  const [secondElem, secondPercent] = sorted[1];
  const blend = Math.abs(topPercent - secondPercent) <= 5 || percentages[sorted[2][0]] > 20;

  // âœ… Compute the final result name
  let resultType = '';
  if (blend) {
    resultType = blendedDescription(topElem, secondElem, percentages)
      .match(/<h3[^>]*>(.*?)<\\/h3>/i)?.[1] || `${topElem}+${secondElem}`;
  } else {
    resultType = singleDescription(topElem)
      .match(/<h3[^>]*>(.*?)<\\/h3>/i)?.[1] || topElem;
  }

  // âœ… Build quizData
  const quizData = {};
  formData.forEach((value, key) => {
    quizData[key] = value;
  });
  quizData.resultType = resultType;
  quizData.percentages = percentages;

  console.log('âœ… Quiz Data:', quizData);

  // âœ… POST to your Apps Script Web App
  fetch('https://script.google.com/macros/s/AKfycby8_v6oPHs2uMkugI-nS8ZsscqeV1hOvhjvIXcl2q2ZyCyBUn3tyE90uxAiw95TVIyZsw/exec', {
    method: 'POST',
    mode: 'no-cors',
    body: JSON.stringify(quizData)
  });

  // âœ… Show results on screen
  const result = document.getElementById("result");
  result.innerHTML = `
    <h2>Your Debating Personality Mix</h2>
    ${generateBar("ğŸ”¥ Fire", percentages.fire, "#e74c3c")}
    ${generateBar("ğŸŒŠ Water", percentages.water, "#3498db")}
    ${generateBar("ğŸŒ Earth", percentages.earth, "#2ecc71")}
    ${generateBar("ğŸŒ¬ Air", percentages.air, "#9b59b6")}
    <div style="margin-top:25px;">
      ${blend ? blendedDescription(topElem, secondElem, percentages) : singleDescription(topElem)}
    </div>
    <button onclick="window.location.reload()" style="margin-top:20px; padding: 10px 20px; background:#555; color:white; border:none; border-radius:5px; cursor:pointer;">Retake Quiz</button>
  `;
  result.style.display = 'block';
  window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
}


  function generateBar(label, percent, color) {
    return `
      <div><strong>${label}:</strong> ${percent}%</div>
      <div class="bar"><div class="bar-inner" style="width:${percent}%; background:${color};">${percent > 10 ? percent + '%' : ''}</div></div>
    `;
  }
  const answerWeights = {
    a: { fire: 85, air: 15 },
    b: { water: 80, earth: 20 },
    c: { earth: 85, fire: 15 },
    d: { air: 85, water: 15 }
  };

  const descriptions = {
    fire: {
      name: "ğŸ”¥ Fire â€“ The Challenger",
      text: "You thrive in the heat of the moment. Passionate, competitive, and energetic, you bring intensity to every round. You're bold in clashes and unafraid to take risks â€” sometimes overwhelming, but always unforgettable. As a debater, you're the sparkplug of the team. You perform best in moments that require quick thinking, fiery rebuttals, or commanding the room with powerful rhetoric. When youâ€™re in your element, your speeches can shift the entire energy of a round."
    },
    water: {
      name: "ğŸŒŠ Water â€“ The Empath",
      text: "You navigate debates with emotional intelligence and grace. Calm, adaptable, and strategic, you read the room well and excel in nuanced analysis. Youâ€™re not the loudest, but you often win hearts and minds. As a debater, you're the emotional compass of your team, able to sense tone shifts and tailor arguments to resonate deeply with judges. Youâ€™re invaluable in moral debates, narrative framing, and empathy-driven persuasion."
    },
    earth: {
      name: "ğŸŒ Earth â€“ The Analyst",
      text: "You bring order to chaos. Logical, structured, and deeply prepared, you ground your team with solid analysis and unshakable frameworks. You may not dazzle, but you never crumble under pressure. In debate, youâ€™re the planner â€” the one who ensures arguments hold up under scrutiny. Your strength lies in clear structure, tight logic, and being the rock others rely on when the motion is messy or complex."
    },
    air: {
      name: "ğŸŒ¬ Air â€“ The Visionary",
      text: "Youâ€™re the abstract thinker with a creative edge. Witty, intuitive, and full of lateral insights, you challenge norms and flip debates on their heads. At your best, you inspire; at your worst, you confuse. As a debater, you shine when the motion invites reinterpretation or unorthodox framing. Your strength is in surprise â€” you see links others donâ€™t and make arguments feel fresh and intellectually exciting."
    }
  };

  function singleDescription(elem) {
    const nameMap = {
      fire: "ğŸ”¥ Fire",
      water: "ğŸŒŠ Water",
      earth: "ğŸŒ Earth",
      air: "ğŸŒ¬ Air"
    };
    const title = `<h3>${nameMap[elem]} â€“ The Pure Element</h3>`;
    return `${title}<p>${descriptions[elem].text}</p>`;
  }

  function blendedDescription(primary, secondary, percentages) {
    const mixMap = {
      airfire: { name: "âš¡ Lightning", desc: "You dazzle with sharp wit and wild creativity. You move fast, think even faster, and always keep your opponents guessing. You're bold, energetic, and can electrify the room when you're on fire. As a debater, you thrive in fast-paced exchanges, love POIs, and often shine in whip or reply speeches where thinking on your feet matters most." },
      airearth: { name: "ğŸœï¸ Sand", desc: "You blend structure and abstraction effortlessly. Grounded in logic yet always flexible, you erode weak arguments grain by grain â€” subtle, strategic, and quietly powerful. As a debater, you're likely the silent strategist. You may not speak the loudest, but your framing shifts the debate in powerful, underappreciated ways." },
      airwater: { name: "ğŸŒ«ï¸ Mist", desc: "Elusive but persuasive, you bring sensitivity and originality to every round. You often sway others with subtle but powerful insights. Gentle but never weak, you make complexity elegant. Youâ€™re the type of debater who thrives in nuanced motions and excels at pulling hidden assumptions to the surface." },
      earthfire: { name: "ğŸ¦â€ğŸ”¥ Lava", desc: "A grounded powerhouse. You use structured logic but erupt with fiery impact when needed. Calm under pressure, yet explosively persuasive. Your calm surface hides formidable force. Youâ€™re a master at layering strong frameworks with impactful rhetoric â€” ideal for opening half roles where the foundation matters." },
      earthwater: { name: "ğŸ¤ Mud", desc: "Calm, consistent, and precise. You win rounds by gently but firmly shaping the terrain of debate. Youâ€™re a stabilizer in the storm â€” dependable, grounded, and quietly effective. Your preferred roles are often those requiring steady development, like deputy speeches or reply summaries that reinforce and refine the team's message." },
      firewater: { name: "â™¨ï¸ Steam", desc: "You are both passionate and empathetic â€” combining intensity with emotional insight. Youâ€™re a speaker who brings both force and grace into the room. You press hard, but you listen deeply too. You are often the emotional anchor of your team, capable of balancing pathos and logos, making you excellent at persuasive narrative-building and refutation alike." },
      airearthfire: { name: "ğŸ”¥ğŸŒª Wildfire", desc: "Youâ€™re rapid, calculated chaos. Your arguments spread like wildfire â€” unpredictable, forceful, and impossible to ignore. You balance creativity with logic and intensity with finesse. As a debater, you likely thrive in back halves where you can adapt quickly and burn through weak opposition lines. When you speak, the room pays attention â€” because no one knows whatâ€™s coming next, but they know itâ€™ll leave an impact." },
      airfirewater: { name: "â›ˆ Storm", desc: "Youâ€™re a tempest of emotion, energy, and creativity â€” unpredictable and powerful. You blend rhetorical flair, emotional appeal, and visionary framing into an explosive mix. In debate, you're the force that disrupts the expected flow, reframing debates and overwhelming opponents with multi-faceted pressure. You thrive on the unexpected and often change the tide with a single inspired speech." },
      airEarthWater: { name: "ğŸŒ« Quicksand", desc: "Slow, deliberate, and deadly effective. You subtly pull opponents off balance and drag them into deeply framed complexity. You excel at setting traps and reframing debates in ways that disorient your opponents while staying calm yourself. As a debater, you are the sleeper threat â€” underestimated at first, but lethal by the final speech." },
      earthfirewater: { name: "ğŸŒ‹ Volcano", desc: "Explosive yet grounded, you combine passion, empathy, and structure. You build arguments that simmer slowly before erupting in a dramatic finish. In debate, you're the teammate who holds the room's attention from the first word to the last. With control, precision, and intensity, youâ€™re an all-rounder capable of taking on any role â€” and dominating it." }
    };

    const sortedElems = Object.entries(percentages).sort((a, b) => b[1] - a[1]);
    const topThree = sortedElems.slice(0, 3).filter(([_, v]) => v > 20).map(([k]) => k);
    const comboKey = topThree.length >= 2 ? topThree.sort().join('') : [primary, secondary].sort().join('');
    const mix = mixMap[comboKey];

    if (mix) {
      return `<hr style="margin: 30px 0; border: none; border-top: 2px dashed #ccc;">
<h3 style="font-size: 24px; color: #222;">${mix.name}</h3><p style="font-size: 18px; color: #444; line-height: 1.6;">${mix.desc}</p>`;
    }

    return `<h3>ğŸ”€ ${primary.toUpperCase()} + ${secondary.toUpperCase()}</h3><p>Youâ€™re a unique blend of <strong>${primary}</strong> and <strong>${secondary}</strong>. Together, they form something new â€” but we don't yet have a name for it!</p>`;
  }
</script>

</body>
</html>
